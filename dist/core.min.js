!function(){var a=function(){return["lodash"]},e=function(a,e){a.imagoSettings&&(e.defaults.headers.common.Authorization="Basic "+a.imagoSettings.apikey+":")};angular.module("imago",new a).run(["$window","$http",e])}.call(this),function(){angular.module("lodash",[]).factory("_",function(){return window._()})}.call(this),function(){var a=function(e,n,t){return{requestError:function(a){return n.error(angular.toJson(a)),e.reject(a)},responseError:function(a){var e=t.get("$state");switch(console.log("rejection.status",a.status),a.status){case 401:return e.go("home");case 404:return e.go("page-not-found")}}}};angular.module("imago").factory("httpInterceptor",["$q","$log","$injector",a])}.call(this),function(){var a=function(){return{link:function(a,e,n){if(null==(n=n.ngHref)||!n.match("^/"))return e.attr("target","_blank")}}};angular.module("imago").directive("imagoChecktarget",[a])}.call(this),function(){var a=function(){var m="sort.worker.js",S="undefined"!=typeof window&&null!==window&&window.debug?"http://0.0.0.0:8000":"https://api.imago.io",e="public",v=1e4,A={updatePageTitle:!0};this.setSortWorker=function(a){return m=a},this.setIndexRange=function(a){return v=a},this.getHost=function(){return S},this.setHost=function(a){return S=a},this.setClient=function(a){return e=a},this.getDefaults=function(){return results},this.setDefaults=function(a){if(_.isPlainObject(a))return _.assign(A,a);throw"defaults needs to be an object"},this.$get=function(c,l,u,d,h,f,g,p){return l.defaults.headers.common.NexClient=e,{host:S,sortWorker:m,indexRange:v,nextClient:e,assets:{get:function(a){return l.get(S+"/api/assets/"+a)},create:function(a){for(var e,n=[],t=_.chunk(a,25),r=0,i=t.length;r<i;r++)e=t[r],n.push(l.post(S+"/api/assets",e).then(function(a){return a.data.data}));return f.all(n).then(function(a){return _.flatten(a)})},update:function(a){return l.put(S+"/api/assets/"+a._id,a)},delete:function(a){return l.delete(S+"/api/assets/"+a)},trash:function(a){return l.post(S+"/api/assets/trash",a)},move:function(a,e,n){return l.post(S+"/api/assets/move",{src:e,dest:n,items:a})},copy:function(a,e,n){return l.post(S+"/api/assets/copy",{src:e,dest:n,items:a})},batch:function(a){for(var e,n,t,r,i,o,s=0,u=a.length;s<u;s++)if(null==(i=(e=a[s]).types)||!i.length)return null!=(i=h.trackJs)&&i.track("Tried to save without types - data: "+JSON.stringify(e)),void(c.generalError=!0);for(r=[],n=0,t=(a=_.chunk(a,100)).length;n<t;n++)o=a[n],r.push(l.put(S+"/api/assets/update",{assets:o}));return f.all(r)},download:function(a,e){return l.post(S+"/api/assets/download",{assets:a,resolution:e})},pdfRequest:function(a){return l.post(S+"/api/assets/pdf",a)},spreadRequest:function(a){return l.post(S+"/api/assets/spread",a)},transformRequest:function(a){return l.post(S+"/api/assets/transform",a)},repair:function(a){var e;return null!=(e=h.trackJs)&&e.track("Repair assets order - id: "+a),l.put(S+"/api/assets/repairorder",{_id:a})}},data:[],currentCollection:void 0,search:function(a){a=_.map(a,this.formatQuery);return a.length?l.post(S+"/api/search",angular.toJson(a)):f.resolve()},getLocalData:function(d,c){return null==c&&(c={}),f((h=this,function(a,e){var n,t,r,i,o,s,u,l;for(r in c)if(l=c[r],"localData"===r&&!1===l)return e(d);for(r in d){if(l=d[r],"fts"===r||"page"===r||"pagesize"===r)return e(d);"collection"===r?(d=g.renameKey("collection","path",d),s=l):"kind"===r?d=g.renameKey("kind","type",d):"metakind"===r?d=g.renameKey("metakind","type",d):"path"===r&&(s=l)}if(!(s="/"===(null!=s?s.slice(-1):void 0)&&1<s.length?s.substring(0,s.length-1):s))return e(d);if(o={path:_.isString(s)?s:_.head(s)},!(o=h.find(o)))return e(d);if(o.assets=h.findChildren(o),o.count||o.assets.length||!o.count){if(o.assets.length===o.count&&o.count){if(d.recursive)for(t=0,i=(u=o.assets).length;t<i;t++)if((n=u[t]).assets.length!==n.count)return e(d);return o.assets=h.filterAssets(o.assets,d),o.assets.length!==o.count?e(d):a(o)}return e(d)}return console.log("asset found asset has no children",o),a(o)}));var h},getData:function(a,n){var e,t,r,i,o,s;for(null==n&&(n={}),a=(a=angular.copy(a))||u.path(),_.isString(a)&&(a=[{path:a}]),a=g.toArray(a),i=[],s=this,r=function(a){return f(function(o,e){return s.getLocalData(a,n).then(function(e){var a;return e.assets?(a={assets:e.assets,order:e.sortorder,path:m},p.work(a).then(function(a){return e.assets=a.assets,o(e)})):o(e)},function(a){return s.search([a]).then(function(a){var e,n,t,r,i;if(null!=a&&a.data){for(i=[],e=0,n=(t=a.data).length;e<n;e++)r=t[e],i.push(o(s.create(r)));return i}},function(a){if(e(),401===a.status)return console.warn("Imago API warning:",a.data)})})})},e=0,t=a.length;e<t;e++)o=a[e],i.push(r(o));return f.all(i).then(function(a){var e;return a=_.flatten(a),(n.updatePageTitle||A.updatePageTitle&&_.isUndefined(n.updatePageTitle))&&(n.title?d.prop("title",n.title):1===a.length&&null!=(e=a[0].fields)&&null!=(e=e.title)&&e.value?d.prop("title",a[0].fields.title.value.replace(/<[A-Za-z\/][^<>]*>/g," ").replace(/\r?\n|\r/g,"")):1===a.length&&a[0].name&&d.prop("title",a[0].name)),a})},formatQuery:function(a){var e,n,t,r,i,o,s,u,l={};if(_.isArray(a))for(n=0,i=a.length;n<i;n++)for(r in e=a[n])u=e[r],l[r]||(l[r]=[]),l[r].push(u);else if(_.isPlainObject(a))for(r in a)u=a[r],l[r]=angular.isArray(u)?u:[u];else _.isString(a)&&(l.path=[a]);for(t=0,o=(s=["page","pagesize"]).length;t<o;t++)l.hasOwnProperty(r=s[t])&&(l[r]=l[r][0]);return l},addAsset:function(a){return this.find({_id:a._id})||this.data.push(a),this.populateData(a.assets)},populateData:function(a){var e,n,t,r;if(_.isArray(a)){for(r=[],n=0,t=a.length;n<t;n++)e=a[n],r.push(this.addAsset(e));return r}},getById:function(a){var e=this.find({_id:a});return e?(e.assets=this.findChildren(e),f.resolve(e)):this.assets.get(a).then(function(a){return a.data})},create:function(a){var e=a;return this.populateData(a.assets),this.find({_id:e._id})||("collection"===e.type&&(e=_.omit(e,"assets")),this.data.push(e)),_.cloneDeep(a)},findChildren:function(a){return _.filter(this.data,{parent:a._id})},findParent:function(a){return _.find(this.data,{_id:a.parent})},findByAttr:function(a){return null==a&&(a={}),_.filter(this.data,a)},find:function(a){return null==a&&(a={}),_.find(this.data,a)},findIdx:function(a){return null==a&&(a={}),_.findIndex(this.data,a)},filterAssets:function(a,e){var n,t,r,i,o,s;if(e=_.omit(e,["path","recursive"]),_.keys(e).length)for(r in n=function(i,o){return _.filter(a,function(a){var e,n,t,r;if(null!=(t=a.fields)&&t.hasOwnProperty(o)){if(r=a.fields[o].value,_.isString(r)&&r.match(new RegExp(i,"i")))return!0;if(_.isNumber(r)&&ParseFloat(r===ParseFloat(i)))return!0;if(_.isArray(r))for(e=0,n=r.length;e<n;e++)if(r[e].match(new RegExp(i,"i")))return!0;return!1}if(a[o])return r=a[o],!(!_.isString(r)||!r.match(new RegExp(i,"i")))||!(!_.isString(r)||!g.normalize(r).match(new RegExp(i,"i")))||!(!_.isNumber(r)||!ParseFloat(r===ParseFloat(i)))})},e)if(s=e[r],"path"!==r)if(_.isArray(s))for(t=0,i=s.length;t<i;t++)o=s[t],a=n(o,r);else _.isString(s)&&(a=n(s,r));return a},updateCount:function(a,e){return a.count=a.count+e,this.update(a,{stream:!1})},add:function(u,l){return null==l&&(l={}),f((d=this,function(r,a){var i,e,n,t,o,s;if(l.save){for(n=0,o=(e=angular.copy(u)).length;n<o;n++)delete(i=e[n]).base64_url;return d.assets.create(e).then(function(a){for(var e,n=0,t=a.length;n<t;n++)(i=a[n]).base64_url=null!=(e=_.find(u,{uuid:i.uuid}))?e.base64_url:void 0,d.data.push(i);return c.$emit("assets:add",a),r(a)})}for(t=0,s=u.length;t<s;t++)i=u[t],d.data.push(i);return c.$emit("assets:add",u),r(u)}));var d},update:function(s,u){return null==u&&(u={}),_.isUndefined(u.stream)&&(u.stream=!0),_.isUndefined(u.attribute)&&(u.attribute="_id"),f((l=this,function(a,e){for(var n,t,r,i=t=0,o=(s=_.isArray(s)?s:[s]).length;t<o;i=++t)n=s[i],(r={})[u.attribute]=n[u.attribute],n=_.omit(n,"assets"),(r=l.find(r))?(r.base64_url&&n.serving_url&&(n.base64_url=null),_.assign(r,n),s[i]=r):l.data.push(n),n.base64_url&&(n.base64_url=null);if(u.save?a(l.assets.batch(s)):a(s),u.stream)return c.$emit("assets:update",s)}));var l},delete:function(o,s){return null==s&&(s={}),f((u=this,function(a,e){var n,t,r,i;if(null==o||!o.length)return e(o);for(_.isUndefined(s.stream)&&(s.stream=!0),i=[],t=0,r=o.length;t<r;t++)n=o[t],_.remove(u.data,{_id:n._id}),s.save&&i.push(u.assets.delete(n._id));return a(i.length?f.all(i):o),s.stream?c.$emit("assets:delete",o):void 0}));var u},trash:function(a){for(var e,n=[],t=0,r=a.length;t<r;t++)e=a[t],n.push({_id:e._id,name:e.name});return this.assets.trash(n),this.delete(a)},copy:function(e,o,s){return f((u=this,function(i,a){return u.paste(e).then(function(a){for(var e,n=[],t=0,r=a.length;t<r;t++)e=a[t],n.push({_id:e._id,order:e.order,name:e.name});return u.assets.copy(n,o,s).then(function(a){return"-order"===u.currentCollection.sortorder?i(u.update(a.data)):(u.update(a.data,{stream:!1}),i(u.reSort(u.currentCollection)))})})}));var u},move:function(a,i,o){var s,u=f.defer();return this.paste(a).then((s=this,function(a){var e,n,t,r;for(("-order"===s.currentCollection.sortorder?s.update(a):(s.update(a,{stream:!1}),s.reSort(s.currentCollection))).then(function(){return u.resolve()}),r=[],n=0,t=a.length;n<t;n++)e=a[n],r.push({_id:e._id,order:e.order,name:e.name});return s.assets.move(r,i,o)})),u.promise},paste:function(a,r){var e,i,n,t,o,s;for(null==r&&(r={}),_.isUndefined(r.checkdups)&&(r.checkdups=!0),i=this.findChildren(this.currentCollection),n=function(e){var a,n,t;if(r.checkdups&&0!==_.filter(i,function(a){return g.normalize(e.name)===g.normalize(a.name)}).length)for(n=1,a=!0,t=e.name;a;)e.name=t+"_"+n,n++,a=!!_.filter(i,function(a){return g.normalize(e.name)===g.normalize(a.name)}).length;return f.resolve(e)},s=[],t=0,o=a.length;t<o;t++)e=a[t],s.push(n(e));return f.all(s)},reSort:function(a){var e;return a.assets&&"-order"!==a.sortorder?(e=this.reindexAll(a.assets),this.update(e,{stream:!1,save:!0}),a.sortorder="-order",this.update(a,{save:!0})):f.reject(a)},reindexAll:function(a){for(var e,n,t=[],r=a.length,i=n=0,o=a.length;n<o;i=++n)e=a[i],t.push({_id:e._id,order:(r-i)*v});return t},reorder:function(a,e,n,t){var r,i,o,s,u;return null==t&&(t={}),_.isUndefined(t.process)&&(t.process=!0),t.reverse?(i=e[r=a-n.length],o=e[a+1]||{order:0},n=n.reverse()):o=!1===t.process?(i=e[a-1],e[a]||{order:0}):(r=a+n.length,i=e[a-1]||void 0,e[r]),i?(s=(i.order-o.order)/(n.length+1))<=.05&&(u=!0):s=v,{minus:s,order:o.order+s,repair:u}},batchAddTag:function(a){for(var e,n,t,r,i,o,s,u=r=0,l=a.length;r<l;u=++r){if(e=a[u],!(o=this.find({_id:e._id})))return;for(i in t={fields:o.fields,parent:o.parent},s=angular.copy(e))if(s[i],"fields"===i)for(i in s.fields)t.fields||(t.fields={}),(n=t.fields)[i]||(n[i]={}),(n=t.fields[i]).value||(n.value=[]),-1===t.fields[i].value.indexOf(s.fields[i])&&t.fields[i].value.push(s.fields[i]);else t[i]=s[i];a[u]=t}return this.update(a,{save:!0})},batchChange:function(a,e){for(var n,t,r,i,o,s,u,l=i=0,d=a.length;i<d;l=++i)if(n=a[l],s=this.find({_id:n._id})){for(o in r={fields:s.fields,parent:s.parent},u=angular.copy(n))if("fields"===o)for(o in u.fields)r.fields||(r.fields={}),e?((t=r.fields)[o]||(t[o]={}),(t=r.fields[o]).value||(t.value={}),r.fields[o].value[e]=u.fields[o].value[e]):r.fields[o]=u.fields[o];else r[o]=u[o];_.isEmpty(r.fields)&&delete r.fields,a[l]=r}return this.update(a,{save:!0})},isDuplicated:function(o,s,u){return null==u&&(u={}),f(function(a,e){var n,t,r,i;if(_.isUndefined(u.rename)&&(u.rename=!1),!o.name)return e(o.name);if(r=g.normalize(o.name),(e=_.filter(s,function(a){return!!a.name&&r===g.normalize(a.name)})).length){if(1===e.length&&e[0]._id===o._id)return a(!1);if(u.rename){for(t=1,n=!0,i=r;n;)r=i+"_"+t,t++,n=!!_.find(s,function(a){return _.kebabCase(r)===_.kebabCase(a.name)});return a(r)}return a(!0)}return a(!1)})},prepareCreation:function(n,t,r,i){return null==i&&(i=!1),f((o=this,function(e,a){return n.name?o.isDuplicated(n,t.assets,{rename:i}).then(function(a){return a&&_.isBoolean(a)?e("duplicated"):(_.isString(a)&&(n.name=a),r?n.order=r:"-order"===t.sortorder?(a=t.assets,n.order=a.length?a[0].order+v:v):(t.assets.length?(a=o.reindexAll(t.assets),o.update(a,{save:!0}),n.order=a[0].order+v):n.order=v,t.sortorder="-order",o.update(t,{save:!0})),n.parent=t._id,e(n))}):a(n.name)}));var o}}}};angular.module("imago").provider("imagoModel",[a])}.call(this),function(){var a=function(s,n,u,a){return{restrict:"A",link:function(o,a,e){return o.scrollPos=[],o.$on("$viewContentLoaded",function(){var a=_.find(o.scrollPos,{path:u.href(u.current,u.params)});if(2<o.scrollPos.length&&(o.scrollPos=o.scrollPos.slice(0,2)),null!=a&&a.scroll)return n(function(){return s.scrollTo(0,null!=a?a.scroll:void 0)},500);s.scrollTo(0,0)}),o.$on("$stateChangeStart",function(a,e,n,t,r,i){t=u.href(t,r);if(t)return o.scrollPos.unshift({}),o.scrollPos[0]={path:t,scroll:s.scrollY}})}}};angular.module("imago").directive("imagoSaveScroll",["$window","$timeout","$state","$location",a])}.call(this),function(){var a=function(){var e;return{KEYS:{16:"onShift",18:"onAlt",17:"onCommand",91:"onCommand",93:"onCommand",224:"onCommand",13:"onEnter",32:"onSpace",37:"onLeft",38:"onUp",39:"onRight",40:"onDown",46:"onDelete",8:"onBackspace",9:"onTab",188:"onComma",190:"onPeriod",27:"onEsc",186:"onColon",65:"onA",67:"onC",86:"onV",88:"onX",68:"onD",187:"onEqual",189:"onMinus"},SYMBOLS:{EUR:"&euro;",USD:"$",YEN:"&yen;",GBP:"&pound;",GENERIC:"&curren;"},CURRENCY_MAPPING:{"United Arab Emirates":"AED",Afghanistan:"AFN",Albania:"ALL",Armenia:"AMD",Angola:"AOA",Argentina:"ARS",Australia:"AUD",Aruba:"AWG",Azerbaijan:"AZN","Bosnia and Herzegovina":"BAM",Barbados:"BBD",Bangladesh:"BDT",Bulgaria:"EUR",Bahrain:"BHD",Burundi:"BIF",Bermuda:"BMD",Brunei:"BND",Bolivia:"BOB",Brazil:"BRL",Bahamas:"BSD",Bhutan:"BTN",Botswana:"BWP",Belarus:"BYR",Belize:"BZD",Canada:"CAD",Switzerland:"CHF",Chile:"CLP",China:"CNY",Colombia:"COP","Costa Rica":"CRC","Cuba Convertible":"CUC","Cuba Peso":"CUP","Cape Verde":"CVE","Czech Republic":"EUR",Djibouti:"DJF",Denmark:"EUR","Dominican Republic":"DOP",Algeria:"DZD",Egypt:"EGP",Eritrea:"ERN",Ethiopia:"ETB",Autria:"EUR",Fiji:"FJD","United Kingdom":"EUR",Georgia:"GEL",Guernsey:"GGP",Ghana:"GHS",Gibraltar:"GIP",Gambia:"GMD",Guinea:"GNF",Guatemala:"GTQ",Guyana:"GYD","Hong Kong":"HKD",Honduras:"HNL",Croatia:"EUR",Haiti:"HTG",Hungary:"EUR",Indonesia:"IDR",Israel:"ILS","Isle of Man":"IMP",India:"INR",Iraq:"IQD",Iran:"IRR",Iceland:"ISK",Jersey:"JEP",Jamaica:"JMD",Jordan:"JOD",Japan:"JPY",Kenya:"KES",Kyrgyzstan:"KGS",Cambodia:"KHR",Comoros:"KMF","North Korea":"KPW","South Korea":"KRW",Kuwait:"KWD","Cayman Islands":"KYD",Kazakhstan:"KZT",Laos:"LAK",Lebanon:"LBP","Sri Lanka":"LKR",Liberia:"LRD",Lesotho:"LSL",Lithuania:"EUR",Latvia:"EUR",Libya:"LYD",Morocco:"MAD",Moldova:"MDL",Madagascar:"MGA",Macedonia:"MKD",Mongolia:"MNT",Macau:"MOP",Mauritania:"MRO",Mauritius:"MUR",Malawi:"MWK",Mexico:"MXN",Malaysia:"MYR",Mozambique:"MZN",Namibia:"NAD",Nigeria:"NGN",Nicaragua:"NIO",Norway:"NOK",Nepal:"NPR","New Zealand":"NZD",Oman:"OMR",Panama:"PAB",Peru:"PEN","Papua New Guinea":"PGK",Philippines:"PHP",Pakistan:"PKR",Poland:"EUR",Paraguay:"PYG",Qatar:"QAR",Romania:"EUR",Serbia:"RSD",Russia:"RUB",Rwanda:"RWF","Saudi Arabia":"SAR","Solomon Islands":"SBD",Seychelles:"SCR",Sudan:"SDG",Sweden:"SEK",Singapore:"SGD","Saint Helena":"SHP",Suriname:"SRD","El Salvador":"SVC",Syria:"SYP",Swaziland:"SZL",Thailand:"THB",Tajikistan:"TJS",Turkmenistan:"TMT",Tunisia:"TND",Tonga:"TOP",Turkey:"TRY","Trinidad and Tobago":"TTD",Tuvalu:"TVD",Taiwan:"TWD",Tanzania:"TZS",Ukraine:"UAH",Uganda:"UGX","United States":"USD",Uruguay:"UYU",Uzbekistan:"UZS",Venezuela:"VEF",Vietnam:"VND",Vanuatu:"VUV",Samoa:"WST",Yemen:"YER","South Africa":"ZAR",Zambia:"ZMW",Zimbabwe:"ZWD",Austria:"EUR",Belgium:"EUR",Cyprus:"EUR",Estonia:"EUR",Finland:"EUR",France:"EUR",Germany:"EUR",Greece:"EUR",Ireland:"EUR",Italy:"EUR",Luxembourg:"EUR",Malta:"EUR",Netherlands:"EUR",Portugal:"EUR",Slovakia:"EUR",Slovenia:"EUR",Spain:"EUR"},CODES:{Andorra:"AD","United Arab Emirates":"AE",Afghanistan:"AF","Antigua and Barbuda":"AG",Anguilla:"AI",Albania:"AL",Armenia:"AM",Angola:"AO",Antarctica:"AQ",Argentina:"AR","American Samoa":"AS",Austria:"AT",Australia:"AU",Aruba:"AW","Aland Islands":"AX",Azerbaijan:"AZ","Bosnia and Herzegovina":"BA",Barbados:"BB",Bangladesh:"BD",Belgium:"BE","Burkina Faso":"BF",Bulgaria:"BG",Bahrain:"BH",Burundi:"BI",Benin:"BJ","Saint Barthelemy":"BL",Bermuda:"BM",Brunei:"BN",Bolivia:"BO",Bonaire:"BQ",Brazil:"BR",Bahamas:"BS",Bhutan:"BT",Bouvet:"BV",Botswana:"BW",Belarus:"BY",Belize:"BZ",Canada:"CA","Cocos Islands":"CC","Democratic Republic of the Congo":"CD","Central African Republic":"CF","Republic of the Congo":"CG",Switzerland:"CH","Ivory Coast":"CI","Cook Islands":"CK",Chile:"CL",Cameroon:"CM",China:"CN",Colombia:"CO","Costa Rica":"CR",Cuba:"CU","Cape Verde":"CV",Curacao:"CW","Christmas Island":"CX",Cyprus:"CY","Czech Republic":"CZ",Germany:"DE",Djibouti:"DJ",Denmark:"DK",Dominica:"DM","Dominican Republic":"DO",Algeria:"DZ",Ecuador:"EC",Estonia:"EE",Egypt:"EG","Western Sahara":"EH",Eritrea:"ER",Spain:"ES",Ethiopia:"ET",Finland:"FI",Fiji:"FJ","Falkland Islands":"FK",Micronesia:"FM","Faroe Islands":"FO",France:"FR",Gabon:"GA","United Kingdom":"GB","Great Britain":"GB",Grenada:"GD",Georgia:"GE","French Guiana":"GF",Guernsey:"GG",Ghana:"GH",Gibraltar:"GI",Greenland:"GL",Gambia:"GM",Guinea:"GN",Guadeloupe:"GP","Equatorial Guinea":"GQ",Greece:"GR","South Georgia and the South Sandwich Islands":"GS",Guatemala:"GT",Guam:"GU","Guinea-Bissau":"GW",Guyana:"GY","Hong Kong":"HK","Heard Island and McDonald Islands":"HM",Honduras:"HN",Croatia:"HR",Haiti:"HT",Hungary:"HU",Indonesia:"ID",Ireland:"IE",Israel:"IL","Isle of Man":"IM",India:"IN","British Indian Ocean Territory":"IO",Iraq:"IQ",Iran:"IR",Iceland:"IS",Italy:"IT",Jersey:"JE",Jamaica:"JM",Jordan:"JO",Japan:"JP",Kenya:"KE",Kyrgyzstan:"KG",Cambodia:"KH",Kiribati:"KI",Comoros:"KM","Saint Kitts and Nevis":"KN","North Korea":"KP","South Korea":"KR",Kosovo:"XK",Kuwait:"KW","Cayman Islands":"KY",Kazakhstan:"KZ",Laos:"LA",Lebanon:"LB","Saint Lucia":"LC",Liechtenstein:"LI","Sri Lanka":"LK",Liberia:"LR",Lesotho:"LS",Lithuania:"LT",Luxembourg:"LU",Latvia:"LV",Libya:"LY",Morocco:"MA",Monaco:"MC",Moldova:"MD",Montenegro:"ME","Saint Martin":"MF",Madagascar:"MG","Marshall Islands":"MH",Macedonia:"MK",Mali:"ML",Myanmar:"MM",Mongolia:"MN",Macao:"MO","Northern Mariana Islands":"MP",Martinique:"MQ",Mauritania:"MR",Montserrat:"MS",Malta:"MT",Mauritius:"MU",Maldives:"MV",Malawi:"MW",Mexico:"MX",Malaysia:"MY",Mozambique:"MZ",Namibia:"NA","New Caledonia":"NC",Niger:"NE","Norfolk Island":"NF",Nigeria:"NG",Nicaragua:"NI",Netherlands:"NL",Norway:"NO",Nepal:"NP",Nauru:"NR",Niue:"NU","New Zealand":"NZ",Oman:"OM",Panama:"PA",Peru:"PE","French Polynesia":"PF","Papua New Guinea":"PG",Philippines:"PH",Pakistan:"PK",Poland:"PL","Saint Pierre and Miquelon":"PM",Pitcairn:"PN","Puerto Rico":"PR","Palestinian Territory":"PS",Portugal:"PT",Palau:"PW",Paraguay:"PY",Qatar:"QA",Reunion:"RE",Romania:"RO",Serbia:"RS",Russia:"RU",Rwanda:"RW","Saudi Arabia":"SA","Solomon Islands":"SB",Seychelles:"SC",Sudan:"SD","South Sudan":"SS",Sweden:"SE",Singapore:"SG","Saint Helena":"SH",Slovenia:"SI",Svalbard:"SJ",Slovakia:"SK","Sierra Leone":"SL","San Marino":"SM",Senegal:"SN",Somalia:"SO",Suriname:"SR","Sao Tome and Principe":"ST","El Salvador":"SV","Sint Maarten":"SX",Damascus:"SY",Swaziland:"SZ","Turks and Caicos Islands":"TC",Chad:"TD","French Southern Territories":"TF",Togo:"TG",Thailand:"TH",Tajikistan:"TJ",Tokelau:"TK","East Timor":"TL",Turkmenistan:"TM",Tunisia:"TN",Tonga:"TO",Turkey:"TR","Trinidad and Tobago":"TT",Tuvalu:"TV",Taiwan:"TW",Tanzania:"TZ",Ukraine:"UA",Uganda:"UG","United States Minor Outlying Islands":"UM","United States":"US",USA:"US","United States of America":"US",Uruguay:"UY",Uzbekistan:"UZ",Vatican:"VA","Saint Vincent and the Grenadines":"VC",Venezuela:"VE","British Virgin Islands":"VG","U.S. Virgin Islands":"VI",Vietnam:"VN",Vanuatu:"VU","Wallis and Futuna":"WF",Samoa:"WS",Yemen:"YE",Mayotte:"YT","South Africa":"ZA",Zambia:"ZM",Zimbabwe:"ZW","Serbia and Montenegro":"CS"},COUNTRIES:["United States","Afghanistan","Aland Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bonaire","Bosnia and Herzegovina","Botswana","Bouvet","Brazil","British Indian Ocean Territory","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos Islands","Colombia","Comoros","Cook Islands","Costa Rica","Croatia","Cuba","Curacao","Cyprus","Czech Republic","Damascus","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Great Britain","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-Bissau","Guyana","Haiti","Heard Island and McDonald Islands","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Ivory Coast","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","North Korea","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestinian Territory","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn","Poland","Portugal","Puerto Rico","Qatar","Republic of the Congo","Reunion","Romania","Russia","Rwanda","Saint Barthelemy","Saint Helena","Saint Kitts and Nevis","Saint Lucia","Saint Martin","Saint Pierre and Miquelon","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Scotland","Senegal","Serbia","Serbia and Montenegro","Seychelles","Sierra Leone","Singapore","Sint Maarten","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia and the South Sandwich Islands","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Svalbard","Swaziland","Sweden","Switzerland","Taiwan","Tajikistan","Tanzania","Thailand","Togo","Tokelau","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Tuvalu","U.S. Virgin Islands","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States Minor Outlying Islands","Uruguay","Uzbekistan","Vanuatu","Vatican","Venezuela","Vietnam","Wallis and Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"],STATES:{AUSTRALIA:["ACT","NSW","NT","SA","TAS","QLD","VIC","WA"],CANADA:["AB","BC","MB","NB","NL","NS","ON","PE","QC","SK"],USA:["AL","AK","AS","AZ","CA","CO","CT","DE","DC","FM","FL","AR","GA","GU","HI","ID","IL","IN","IA","KS","KY","LA","ME","MH","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","MP","OH","OK","OR","PW","PA","PR","RI","SC","SD","TN","TX","UT","VT","VI","VA","WA","WV","WI","WY"]},CURRENCIES:["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYR","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","USS","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"],ZERODECIMAL_CURRENCIES:["BIF","CLP","DJF","GNF","JPY","KMF","KRW","MGA","PYG","RWF","VND","VUV","XAF","XOF","XPF","BRL","HUF","MYR","TWD"],PAYPAL_SUPPORTED_CURRENCIES:["AUD","BRL","CAD","CZK","DKK","EUR","HKD","HUF","ILS","JPY","MYR","MXN","TWD","NZD","NOK","PHP","PLN","GBP","RUB","SGD","SEK","CHF","THB","USD"],toType:function(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},requestAnimationFrame:(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)},function(a){return e.call(window,a)}),cookie:function(a,e){var n,t,r,i;if(e)return document.cookie=a+"="+e+"; path=/";for(t=0,r=(i=document.cookie.split(";")).length;t<r;t++)if(0<=(n=i[t]).indexOf(a))return n.split("=")[1];return!1},sha:function(){var a,e="",n="abcdefghijklmnopqrstuvwxyz0123456789";for(a=0;a<=56;++a)e+=n.charAt(Math.floor(Math.random()*n.length));return e},uuid:function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},urlify:function(a){return console.log("urlify")},queryfy:function(a){for(var e,n,t,r=[],i=a.split("+"),o=0,s=i.length;o<s;o++)n=(e=(i[o]||"collection:/").split(":"))[0].toLowerCase(),t=decodeURIComponent(e[1]||""),(e={})[n]=t,r.push(e);return r},pluralize:function(a){return a+"s"},singularize:function(a){return a.replace(/s$/,"")},titleCase:function(a){return"string"==typeof a||a.length?a.replace(/\w\S*/g,function(a){return a[0].toUpperCase()+a.substr(1).toLowerCase()}):a},normalize:function(a){var e,n,t;if("string"==typeof a){for(e in a=a.trim().toLowerCase(),n={"ä":"ae","ö":"oe","ü":"ue","&":"and","\\+":"plus","ß":"ss","@":"at"})t=n[e],a=a.replace(new RegExp(e,"g"),t);return _.deburr(a.replace(/[\.,#¡!?¿@$%\^&\*;:{}='`‘’“”„"~()\?><\[\]†‡‹›•™¦©®ª«»¬°¹²³µ¶·º℅ⁿ§¨‣‼№♠♣♦♥←→↑↓♀♂♩♪♬♭]/g,"").replace(/\/|\_|\‾|\ |\\/g,"-").replace(/\-+/g,"-").replace(/^-|-$/g,""))}},deNormalize:function(a){var e,n,t,r,i;if("string"==typeof a){for(t="",e=0,n=(i=a.split("-")).length;e<n;e++)t+=" "+(r=i[e])[0].toUpperCase()+r.slice(1);return t.slice(1)}},alphaNumSort:function(a,e){for(var n,t,r=function(a){for(var e,n=[],t=0,r=-1,i=0,o=void 0;e=(o=a.charAt(t++)).charCodeAt(0);)(e=46===e||48<=e&&e<=57)!==i&&(n[++r]="",i=e),n[r]+=o;return n},i=r(a),o=r(e),s=0;i[s]&&o[s];){if(i[s]!==o[s])return n=Number(i[s]),t=Number(o[s]),n===i[s]&&t===o[s]?n-t:i[s]>o[s]?1:-1;s++}return i.length-o.length},isiOS:function(){return!!navigator.userAgent.match(/iPad|iPhone|iPod/i)},isiPad:function(){return!!navigator.userAgent.match(/iPad/i)},isiPhone:function(){return!!navigator.userAgent.match(/iPhone/i)},isiPod:function(){return!!navigator.userAgent.match(/iPod/i)},isChrome:function(){return!!navigator.userAgent.match(/Chrome/i)},isIE:function(){return!!navigator.userAgent.match(/MSIE/i)},isFirefox:function(){return!!navigator.userAgent.match(/Firefox/i)},isSafari:function(){return!!navigator.userAgent.match(/Safari/i)&&!this.isChrome()},isMobile:function(){return!!navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i)},isAndroid:function(){return!!navigator.userAgent.match(/Android/i)},isEven:function(a){return this.isNumber(a)&&a%2==0},isOdd:function(a){return this.isNumber(a)&&a%2==1},isNumber:function(a){return a===parseFloat(a)},toFloat:function(a,e){var n;if(!(e=null==e?2:e))return a;for(n=(a=String(a).replace(/\D/g,"")).slice(a.length-e);n.length<e;)n="0"+n;return(a.slice(0,a.length-e)||"0")+"."+n},formatCurrency:function(a,e,n,t){var r,i;return e=isNaN(e=Math.abs(e))?2:e,n=void 0===n?".":n,t=void 0===t?",":t,(a<0?"-":"")+((i=3<(i=(r=parseInt(a=Math.abs(+a||0).toFixed(e))+"").length)?i%3:0)?r.substr(0,i)+t:"")+r.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+t)+(e?n+Math.abs(a-r).toFixed(e).slice(2):"")},toPrice:function(a,e){a=this.toFloat(a).replace(/(\d)(?=(\d{3})+\.)/g,"$1,");return this.getCurrencySymbol(e)+" "+a},isEmail:function(a){return!!a.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},fireEvent:function(a){var e;return bowser.msie&&Number(bowser.version)<=11?(e=document.createEvent(a)).initCustomEvent(a,!1,!1):e=new CustomEvent(a),window.dispatchEvent(e)},getKeyName:function(a){return KEYS[a.which]},getURLParameter:function(a){return a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),null==(a=new RegExp("[\\?&]"+a+"=([^&#]*)").exec(location.search))?"":decodeURIComponent(a[1].replace(/\+/g," "))},inUsa:function(a){return"usa"===(a=null!=a?a.toLowerCase():void 0)||"united states"===a||"united states of america"===a},replaceNewLines:function(a){return a.replace(/(\r\n\r\n|\r\n|\n|\r)/gm,"<br>")},getCurrencySymbol:function(a){return this.SYMBOLS[a]||a},getCurrency:function(a){return CURRENCY_MAPPING[a]},getCountryByCode:function(a){var e,n;if(a)for(e in a=a.toUpperCase(),n=this.CODES)if(n[e]===a)return e},getCountryCodeByCountry:function(a){var e,n,t;if(a)for(e in n=this.CODES)if(t=n[e],e===a)return t},includesTax:function(a){return void 0==={USD:!1}[a]},toArray:function(a){return angular.isArray(a)?a:[a]},getMeta:function(a,e){return a.fields[e]?a.fields[e].value:console.log("This asset does not contain a "+e+" attribute")},isBaseString:function(a){return!!(a=null==a?"":a).match(this.isBaseRegex)},isBaseRegex:/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i,renameKey:function(a,e,n){return n[e]=n[a],delete n[a],n},parentPath:function(a){return a.split("/").slice(0,"/"===a.substr(-1)?-2:-1).join("/")}}};angular.module("imago").factory("imagoUtils",[a])}.call(this),function(){function n(a,e){return function(){return a.apply(e,arguments)}}var a;function e(a,e){this.$q=a,this.$http=e,this.work=n(this.work,this),this.create=n(this.create,this),this.windowURL=window.URL||window.webkitURL,this.test()}e.prototype.store=[],e.prototype.supported=!0,e.prototype.test=function(){var a;try{a=new Blob(["this.onmessage=function(e){postMessage(e.data)}"],{type:"text/javascript"})}catch(a){this.supported=!1}if(!1!==this.supported)try{return this.create(this.windowURL.createObjectURL(a),"imago")}catch(a){return this.supported=!1}},e.prototype.create=function(a,e,n){var t=new Worker(a);return t.addEventListener("message",function(a){return n&&n.resolve(a.data),t.terminate()}),t.postMessage(e)},e.prototype.work=function(e){var n,a,t;return null!=e&&e.path?(n=this.$q.defer(),a=_.find(this.store,{path:e.path}),!1===this.supported?this.create(e.path,e,n):a?this.create(a.blob,e,n):this.$http.get(e.path,{cache:!0}).then((t=this,function(a){a=a.data.toString(),a=new Blob([a],{type:"application/javascript"}),a=t.windowURL.createObjectURL(a);return t.store.push({path:e.path,blob:a}),t.create(a,e,n)})),n.promise):this.$q.reject("invalid path")},a=e,angular.module("imago").service("imagoWorker",["$q","$http",a])}.call(this),function(){var a=function(){return{bindings:{data:"@"},templateUrl:"/imago/not-supported.html",controller:"notSupportedController"}},e=function(a){var e,n,t,r,i,o,s,u,l;if(this.mobile=bowser.mobile,s={ie:9,firefox:32,chrome:30,safari:6,opera:23,android:4.3},this.data=a.$eval(this.data),_.isArray(this.data))for(t=0,i=(u=this.data).length;t<i;t++)if(l=(o=u[t]).match(/\d+/g),l=Number(l),!_.isNaN(l))for(r in s)_.includes(o.toLowerCase(),r)&&(s[r]=l);for(e in n=Number(bowser.version),s)if(l=s[e],bowser.msie&&"ie"===e||bowser.chrome&&"chrome"===e&&!bowser.android||bowser.android&&"android"===e||bowser.firefox&&"firefox"===e||bowser.opera&&"opera"===e?(n<=l||_.isNaN(l))&&(this.invalid=!0):bowser.safari&&"safari"===e&&(n<=l||_.isNaN(l))&&(this.invalid=!0),this.invalid)break};angular.module("imago").component("notSupported",new a).controller("notSupportedController",["$scope",e])}.call(this),function(){var a=function(a){var e,n,t;if(a)if(1===a.length)for(n=0,t=a.length;n<t;n++)e=a[n],this.data=e;else this.data=a};angular.module("imago").controller("page",["promiseData",a])}.call(this),function(){var a;function e(a,e,n){this.$http=a,this.$rootScope=e,this.imagoModel=n,this.get()}e.prototype.data={},e.prototype.loaded=!1,e.prototype.get=function(){return this.$http.get(this.imagoModel.host+"/api/settings").then((n=this,function(a){var e;return n.tenant=null!=(e=_.find(a.data,{name:"tenant"}))?e.value:void 0,n.reorder(a.data)}));var n},e.prototype.reorder=function(a){var e,n,t,r,i,o,s,u,l,d,c;for(this.data={},e=0,i=a.length;e<i;e++)n=a[e],this.data[n.name]=n.value;for(c={},t=0,o=(u=this.data.settings).length;t<o;t++)c[(n=u[t]).name]=n.value;for(this.data.settings=c,r=0,s=(l=["createsend","mailchimp"]).length;r<s;r++)this.data[d=l[r]]&&(this.data[d].connected&&this.data[d].active?this.data[d].status="green":this.data[d].status="amber");return this.$rootScope.tenantSettings=this.data,this.loaded=!0,this.$rootScope.$emit("settings:loaded",this.data)},a=e,angular.module("imago").service("tenantSettings",["$http","$rootScope","imagoModel",a])}.call(this),function(){var a;function e(a){this.$window=a,this.valid=!0,a="imagoTestLocal";try{this.$window.localStorage.setItem(a,a),this.$window.localStorage.removeItem(a)}catch(a){this.valid=!1}}e.prototype.store={},e.prototype.get=function(a){var e;if(this.valid){e=this.$window.localStorage.getItem(a);try{angular.fromJson(e)}catch(a){return e}return angular.fromJson(e)}return this.store[a]},e.prototype.set=function(e,n){if(this.valid)try{return this.$window.localStorage.setItem(e,angular.toJson(n))}catch(a){console.log("error on set LocalStorage:",e,angular.toJson(n))}return this.store[e]=n},e.prototype.remove=function(a){return this.valid?this.$window.localStorage.removeItem(a):delete this.store[a]},e.prototype.clear=function(){return this.valid?this.$window.localStorage.clear():this.store={}},a=e,angular.module("imago").service("webStorage",["$window",a])}.call(this),angular.module("imago").run(["$templateCache",function(a){a.put("/imago/not-supported.html",'<div ng-if="$ctrl.invalid" ng-class="::{\'mobile\': $ctrl.mobile}" class="imago-not-supported-content"><div ng-if="$ctrl.mobile" class="inner"><h1>Browser not supported!</h1></div><div ng-if="!$ctrl.mobile" class="inner"><h1>Time for change!</h1><p>Please download a new version of your favorite browser.</p><ul><li><a href="http://support.apple.com/downloads/#safari" target="_blank"><div class="icon icon-safari"></div><h2>Safari</h2><span>Download</span></a></li><li><a href="http://www.google.com/chrome" target="_blank"><div class="icon icon-chrome"></div><h2>Chrome</h2><span>Download</span></a></li><li><a href="http://www.opera.com/download" target="_blank"><div class="icon icon-opera"></div><h2>Opera</h2><span>Download</span></a></li><li><a href="http://www.mozilla.org/firefox" target="_blank"><div class="icon icon-firefox"></div><h2>Firefox</h2><span>Download</span></a></li><li><a href="https://www.microsoft.com/en-us/windows/microsoft-edge" target="_blank"><div class="icon icon-ie"></div><h2>IE</h2><span>Download</span></a></li></ul></div></div>')}]);