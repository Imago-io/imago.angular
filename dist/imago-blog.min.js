(function(){var t,e;t=function(){function t(t){console.log("query",this.query)}return t}(),e=function(){function t(){return{bindings:{query:"@",posts:"=",state:"@",prevPage:"&prev",nextPage:"&next",pageSize:"@",tags:"=?",currentPage:"=?",opts:"@"},controller:"imagoPagerController as imagopager",templateUrl:function(t){return t.templateUrl||"/imago/imago-pager-test.html"},$routeConfig:[{path:"/",name:"imagoPagerBase",useAsDefault:!0},{path:"/page/:page",name:"imagoPagerPage"},{path:"/tags/:tag",name:"imagoPagerFiltered"},{path:"/tags/:tag/page/:page",name:"imagoPagerFilteredPage"}]}}return t}(),angular.module("imago").controller("imagoPagerController",["$location",t]).component("imagoPagerTest",new e)}).call(this),function(){var t;t=function(){function t(t,e,a,n){return{scope:{query:"@",posts:"=?",data:"=?",state:"@",prevPage:"&prev",nextPage:"&next",pageSize:"@",tags:"=?",currentPage:"=?",opts:"@",loaded:"=?"},restrict:"E",templateUrl:function(t,e){return e.templateUrl||"/imago/imago-pager.html"},link:function(t,r,g){var o;if(t.state||(t.state=(null!=(o=n.current.data)?o.state:void 0)||_.head(n.current.name.split("."))),t.fetchPosts=function(){return a(function(){var a,r,o,s,u;if(t.loaded=!1,t.count+=1,t.posts=[],t.pageSize=(null!=(o=n.current.data)?o.pageSize:void 0)||parseInt(t.pageSize)||10,t.currentPage=n.params.page||parseInt(t.currentPage)||1,t.state||(t.state=(null!=(s=n.current.data)?s.state:void 0)||_.head(n.current.name.split("."))),r=t.query||g.path||(null!=(u=n.current.data)?u.query:void 0),r=_.includes(r,"{")?t.$eval(r):{path:n.current.data.query},t.path&&(r.path=t.path),r.page=t.currentPage||1,r.pagesize=t.pageSize||n.current.data.pageSize,t.opts&&_.includes(t.opts,"{")&&(t.opts=t.$eval(t.opts)),t.opts||(t.opts={}),(n.params.tag||t.tags)&&(r.tags=n.params.tag||t.tags,delete r.recursive),(null!=r?r.path:void 0)&&_.includes(r.path,"/page/")&&(a=r.path.indexOf("/page/"),r.path=r.path.slice(0,a)),!angular.equals(t.lastQuery,r))return t.lastQuery=angular.copy(r),e.getData(r).then(function(e){return function(e){var a,n,r,g,o,s,u;for(g=0,s=e.length;g<s;g++){for(a=e[g],t.next=a.next,t.opts.shuffle?t.posts=_.shuffle(a.assets):t.posts=a.assets,n=angular.copy(a),delete n.assets,t.data=n,t.totalPages=Math.ceil(a.count/t.pageSize),t.pages=[],r=o=1,u=t.totalPages;1<=u?o<u:o>u;r=1<=u?++o:--o)t.pages.push(r);break}return t.loaded=!0}}(this))})},t.changeState=function(){return n.params.tag?n.go(t.state+".filtered.paged",{tag:n.params.tag,page:t.currentPage}):t.state?n.go(t.state+".paged",{page:t.currentPage}):void 0},t.onPrev=function(){return t.currentPage--,g.prev?t.prevPage():t.changeState()},t.onNext=function(){return t.currentPage++,g.next?t.nextPage():t.state?t.changeState():void 0},t.$watchGroup(["currentPage","tags"],t.fetchPosts),t.state)return t.$on("$stateChangeSuccess",function(e,a,n){return t.fetchPosts()})}}}return t}(),angular.module("imago").directive("imagoPager",["imagoUtils","imagoModel","$timeout","$state",t])}.call(this),angular.module("imago").run(["$templateCache",function(t){t.put("/imago/imago-pager-test.html",'<b>imago-pager-template 2</b><ng-outlet></ng-outlet><div class="imago-pager-content"><button ng-disabled="currentPage &lt;= 1" ng-click="onPrev()" class="prev">Previous</button><button ng-disabled="(currentPage &gt;= totalPages &amp;&amp; !next) || (posts.length &lt; pageSize &amp;&amp; !next) || !next" ng-click="onNext()" class="next">Next</button></div>'),t.put("/imago/imago-pager.html",'<div ng-show="loaded" class="imago-pager-content"><button ng-disabled="currentPage &lt;= 1" ng-click="onPrev()" class="btn prev">Previous</button><button ng-disabled="(currentPage &gt;= totalPages &amp;&amp; !next) || (posts.length &lt; pageSize &amp;&amp; !next) || !next" ng-click="onNext()" class="btn next">Next</button></div>')}]);