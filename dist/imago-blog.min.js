(function(){var t,e,a=function(t,e){function a(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return a.prototype=e.prototype,t.prototype=new a,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(){function t(t){console.log("query",this.query)}return t}(),e=function(t){function e(){return{bindings:{query:"@",posts:"=",state:"@",prevPage:"&prev",nextPage:"&next",pageSize:"@",tags:"=?",currentPage:"=?",opts:"@"},controller:"imagoPagerController as imagopager",templateUrl:function(t){return t.templateUrl||"/imago/imago-pager-test.html"},$routeConfig:[{path:"/",name:"imagoPagerBase",useAsDefault:!0},{path:"/page/:page",name:"imagoPagerPage"},{path:"/tags/:tag",name:"imagoPagerFiltered"},{path:"/tags/:tag/page/:page",name:"imagoPagerFilteredPage"}]}}return a(e,t),e}(Component),angular.module("imago").controller("imagoPagerController",["$location",t])}).call(this),function(){var t;t=function(){function t(t,e){return{scope:{query:"@",posts:"=",state:"@",prevPage:"&prev",nextPage:"&next",pageSize:"@",tags:"=?",currentPage:"=?",opts:"@"},restrict:"E",templateUrl:function(t,e){return e.templateUrl||"/imago/imago-pager.html"},link:function(a,n,r){return a.fetchPosts=function(){var n,o,g,s,p;return a.loaded=!1,a.count+=1,a.posts=[],a.pageSize=(null!=(g=e.current.data)?g.pageSize:void 0)||parseInt(a.pageSize)||10,a.currentPage=e.params.page||parseInt(a.currentPage)||1,a.state||(a.state=(null!=(s=e.current.data)?s.state:void 0)||_.head(e.current.name.split("."))),o=a.query||r.path||(null!=(p=e.current.data)?p.query:void 0),o=_.includes(o,"{")?a.$eval(o):{path:o},o.page=a.currentPage,o.pagesize=a.pageSize,a.opts&&_.includes(a.opts,"{")&&(a.opts=a.$eval(a.opts)),a.opts||(a.opts={}),(e.params.tag||a.tags)&&(o.tags=e.params.tag||a.tags),(null!=o?o.path:void 0)&&_.includes(o.path,"/page/")&&(n=o.path.indexOf("/page/"),o.path=o.path.slice(0,n)),t.getData(o).then(function(t){return function(t){var e,n,r;for(n=0,r=t.length;r>n;n++){e=t[n],a.next=e.next,a.opts.shuffle?a.posts=_.shuffle(e.assets):a.posts=e.assets,a.totalPages=e.count/a.pageSize;break}return a.loaded=!0}}(this))},a.prevState=function(){return e.params.tag?e.go(a.state+".filtered.paged",{tag:e.params.tag,page:a.currentPage}):a.state?e.go(a.state+".paged",{page:a.currentPage}):void 0},a.nextState=function(){return e.params.tag?e.go(a.state+".filtered.paged",{tag:e.params.tag,page:a.currentPage}):a.state?e.go(a.state+".paged",{page:a.currentPage}):void 0},a.onPrev=function(){return a.currentPage--,r.prev?a.prevPage():a.state?a.prevState():void 0},a.onNext=function(){return a.currentPage++,r.next?a.nextPage():a.state?a.nextState():void 0},a.$watchGroup(["currentPage","tags"],a.fetchPosts),a.state?a.$on("$stateChangeSuccess",function(t,e,n){return a.state===e.name?a.currentPage=1:void 0}):void 0}}}return t}(),angular.module("imago").directive("imagoPager",["imagoModel","$state",t])}.call(this),angular.module("imago").run(["$templateCache",function(t){t.put("/imago/imago-pager-test.html",'<b>imago-pager-template 2</b><ng-outlet></ng-outlet><div class="imago-pager-content"><button ng-disabled="currentPage &lt;= 1" ng-click="onPrev()" class="prev">Previous</button><button ng-disabled="(currentPage &gt;= totalPages &amp;&amp; !next) || (posts.length &lt; pageSize &amp;&amp; !next) || !next" ng-click="onNext()" class="next">Next</button></div>'),t.put("/imago/imago-pager.html",'<div ng-show="loaded" class="imago-pager-content"><button ng-disabled="currentPage &lt;= 1" ng-click="onPrev()" class="prev">Previous</button><button ng-disabled="(currentPage &gt;= totalPages &amp;&amp; !next) || (posts.length &lt; pageSize &amp;&amp; !next) || !next" ng-click="onNext()" class="next">Next</button></div>')}]);