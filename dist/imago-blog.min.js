(function(){var e,t;e=function(){function e(e){console.log("query",this.query)}return e}(),t=function(){function e(){return{bindings:{query:"@",posts:"=",state:"@",prevPage:"&prev",nextPage:"&next",pageSize:"@",tags:"=?",currentPage:"=?",opts:"@"},controller:"imagoPagerController as imagopager",templateUrl:function(e){return e.templateUrl||"/imago/imago-pager-test.html"},$routeConfig:[{path:"/",name:"imagoPagerBase",useAsDefault:!0},{path:"/page/:page",name:"imagoPagerPage"},{path:"/tags/:tag",name:"imagoPagerFiltered"},{path:"/tags/:tag/page/:page",name:"imagoPagerFilteredPage"}]}}return e}(),angular.module("imago").controller("imagoPagerController",["$location",e]).component("imagoPagerTest",new t)}).call(this),function(){var e;e=function(){function e(e,t,a){return{scope:{query:"@",posts:"=",state:"@",prevPage:"&prev",nextPage:"&next",pageSize:"@",tags:"=?",currentPage:"=?",opts:"@",loaded:"=?"},restrict:"E",templateUrl:function(e,t){return t.templateUrl||"/imago/imago-pager.html"},link:function(n,r,o){var g;return n.state||(n.state=(null!=(g=a.current.data)?g.state:void 0)||_.head(a.current.name.split(".")),console.log("noscope set to",n.state)),n.fetchPosts=function(){return t(function(){var t,r,g,s,u;return n.loaded=!1,n.count+=1,n.posts=[],n.pageSize=(null!=(g=a.current.data)?g.pageSize:void 0)||parseInt(n.pageSize)||10,n.currentPage=a.params.page||parseInt(n.currentPage)||1,n.state||(n.state=(null!=(s=a.current.data)?s.state:void 0)||_.head(a.current.name.split("."))),r=n.query||o.path||(null!=(u=a.current.data)?u.query:void 0),r=_.includes(r,"{")?n.$eval(r):{path:a.current.data.query},n.path&&(r.path=n.path),r.page=n.currentPage||1,r.pagesize=n.pageSize||a.current.data.pageSize,n.opts&&_.includes(n.opts,"{")&&(n.opts=n.$eval(n.opts)),n.opts||(n.opts={}),(a.params.tag||n.tags)&&(r.tags=a.params.tag||n.tags,delete r.recursive),(null!=r?r.path:void 0)&&_.includes(r.path,"/page/")&&(t=r.path.indexOf("/page/"),r.path=r.path.slice(0,t)),angular.equals(n.lastQuery,r)?void 0:(n.lastQuery=angular.copy(r),console.log("query",r),e.getData(r).then(function(e){return function(e){var t,a,r,o,g,s;for(r=0,g=e.length;g>r;r++){for(t=e[r],n.next=t.next,n.opts.shuffle?n.posts=_.shuffle(t.assets):n.posts=t.assets,n.totalPages=Math.ceil(t.count/n.pageSize),n.pages=[],a=o=1,s=n.totalPages;s>=1?s>o:o>s;a=s>=1?++o:--o)n.pages.push(a);break}return n.loaded=!0}}(this)))})},n.changeState=function(){return a.params.tag?a.go(n.state+".filtered.paged",{tag:a.params.tag,page:n.currentPage}):n.state?a.go(n.state+".paged",{page:n.currentPage}):void 0},n.onPrev=function(){return n.currentPage--,o.prev?n.prevPage():n.changeState()},n.onNext=function(){return n.currentPage++,o.next?n.nextPage():n.state?n.changeState():void 0},n.$watchGroup(["currentPage","tags"],n.fetchPosts),n.state?n.$on("$stateChangeSuccess",function(e,t,a){return n.fetchPosts()}):void 0}}}return e}(),angular.module("imago").directive("imagoPager",["imagoModel","$timeout","$state",e])}.call(this),angular.module("imago").run(["$templateCache",function(e){e.put("/imago/imago-pager-test.html",'<b>imago-pager-template 2</b><ng-outlet></ng-outlet><div class="imago-pager-content"><button ng-disabled="currentPage &lt;= 1" ng-click="onPrev()" class="prev">Previous</button><button ng-disabled="(currentPage &gt;= totalPages &amp;&amp; !next) || (posts.length &lt; pageSize &amp;&amp; !next) || !next" ng-click="onNext()" class="next">Next</button></div>'),e.put("/imago/imago-pager.html",'<div ng-show="loaded" class="imago-pager-content"><button ng-disabled="currentPage &lt;= 1" ng-click="onPrev()" class="prev">Previous</button><button ng-disabled="(currentPage &gt;= totalPages &amp;&amp; !next) || (posts.length &lt; pageSize &amp;&amp; !next) || !next" ng-click="onNext()" class="next">Next</button></div>')}]);