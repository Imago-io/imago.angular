!function(){var e=function(e){console.log("query",this.query)},t=function(){return{bindings:{query:"@",posts:"=",state:"@",prevPage:"&prev",nextPage:"&next",pageSize:"@",tags:"=?",currentPage:"=?",opts:"@"},controller:"imagoPagerController as imagopager",templateUrl:function(e){return e.templateUrl||"/imago/imago-pager-test.html"},$routeConfig:[{path:"/",name:"imagoPagerBase",useAsDefault:!0},{path:"/page/:page",name:"imagoPagerPage"},{path:"/tags/:tag",name:"imagoPagerFiltered"},{path:"/tags/:tag/page/:page",name:"imagoPagerFilteredPage"}]}};angular.module("imago").controller("imagoPagerController",["$location",e]).component("imagoPagerTest",new t)}.call(this),function(){var e=function(e,n,r,g){return{scope:{query:"@",posts:"=?",data:"=?",state:"@",prevPage:"&prev",nextPage:"&next",pageSize:"@",tags:"=?",currentPage:"=?",opts:"@",loaded:"=?"},restrict:"E",templateUrl:function(e,t){return t.templateUrl||"/imago/imago-pager.html"},link:function(u,e,a){var t;if(u.state||(u.state=(null!=(t=g.current.data)?t.state:void 0)||_.head(g.current.name.split("."))),u.fetchPosts=function(){return r(function(){var e,t;if(u.loaded=!1,u.count+=1,u.posts=[],u.pageSize=(null!=(t=g.current.data)?t.pageSize:void 0)||parseInt(u.pageSize)||10,u.currentPage=g.params.page||parseInt(u.currentPage)||1,u.state||(u.state=(null!=(t=g.current.data)?t.state:void 0)||_.head(g.current.name.split("."))),t=u.query||a.path||(null!=(t=g.current.data)?t.query:void 0),t=_.includes(t,"{")?u.$eval(t):{path:g.current.data.query},u.path&&(t.path=u.path),t.page=u.currentPage||1,t.pagesize=u.pageSize||g.current.data.pageSize,u.opts&&_.includes(u.opts,"{")&&(u.opts=u.$eval(u.opts)),u.opts||(u.opts={}),(g.params.tag||u.tags)&&(t.tags=g.params.tag||u.tags,delete t.recursive),null!=t&&t.path&&_.includes(t.path,"/page/")&&(e=t.path.indexOf("/page/"),t.path=t.path.slice(0,e)),!angular.equals(u.lastQuery,t))return u.lastQuery=angular.copy(t),n.getData(t).then(function(e){for(var t,a,n,r,g,o=0,s=e.length;o<s;o++){for(t=e[o],u.next=t.next,u.opts.shuffle?u.posts=_.shuffle(t.assets):u.posts=t.assets,delete(a=angular.copy(t)).assets,u.data=a,u.totalPages=Math.ceil(t.count/u.pageSize),u.pages=[],n=r=1,g=u.totalPages;1<=g?r<g:g<r;n=1<=g?++r:--r)u.pages.push(n);break}return u.loaded=!0})})},u.changeState=function(){return g.params.tag?g.go(u.state+".filtered.paged",{tag:g.params.tag,page:u.currentPage}):u.state?g.go(u.state+".paged",{page:u.currentPage}):void 0},u.onPrev=function(){return u.currentPage--,a.prev?u.prevPage():u.changeState()},u.onNext=function(){return u.currentPage++,a.next?u.nextPage():u.state?u.changeState():void 0},u.$watchGroup(["currentPage","tags"],u.fetchPosts),u.state)return u.$on("$stateChangeSuccess",function(e,t,a){return u.fetchPosts()})}}};angular.module("imago").directive("imagoPager",["imagoUtils","imagoModel","$timeout","$state",e])}.call(this),angular.module("imago").run(["$templateCache",function(e){e.put("/imago/imago-pager-test.html",'<b>imago-pager-template 2</b><ng-outlet></ng-outlet><div class="imago-pager-content"><button ng-disabled="currentPage &lt;= 1" ng-click="onPrev()" class="prev">Previous</button><button ng-disabled="(currentPage &gt;= totalPages &amp;&amp; !next) || (posts.length &lt; pageSize &amp;&amp; !next) || !next" ng-click="onNext()" class="next">Next</button></div>'),e.put("/imago/imago-pager.html",'<div ng-show="loaded" class="imago-pager-content"><button ng-disabled="currentPage &lt;= 1" ng-click="onPrev()" class="btn prev">Previous</button><button ng-disabled="(currentPage &gt;= totalPages &amp;&amp; !next) || (posts.length &lt; pageSize &amp;&amp; !next) || !next" ng-click="onNext()" class="btn next">Next</button></div>')}]);