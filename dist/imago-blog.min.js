(function(){var e,t;e=function(){function e(e){console.log("query",this.query)}return e}(),t=function(){function e(){return{bindings:{query:"@",posts:"=",state:"@",prevPage:"&prev",nextPage:"&next",pageSize:"@",tags:"=?",currentPage:"=?",opts:"@"},controller:"imagoPagerController as imagopager",templateUrl:function(e){return e.templateUrl||"/imago/imago-pager-test.html"},$routeConfig:[{path:"/",name:"imagoPagerBase",useAsDefault:!0},{path:"/page/:page",name:"imagoPagerPage"},{path:"/tags/:tag",name:"imagoPagerFiltered"},{path:"/tags/:tag/page/:page",name:"imagoPagerFilteredPage"}]}}return e}(),angular.module("imago").controller("imagoPagerController",["$location",e]).component("imagoPagerTest",new t)}).call(this),function(){var e;e=function(){function e(e,t){return{scope:{query:"@",posts:"=",state:"@",prevPage:"&prev",nextPage:"&next",pageSize:"@",tags:"=?",currentPage:"=?",opts:"@"},restrict:"E",templateUrl:function(e,t){return t.templateUrl||"/imago/imago-pager.html"},link:function(a,n,r){return a.fetchPosts=function(){var n,g,o,s,i;return a.loaded=!1,a.count+=1,a.posts=[],a.pageSize=(null!=(o=t.current.data)?o.pageSize:void 0)||parseInt(a.pageSize)||10,a.currentPage=t.params.page||parseInt(a.currentPage)||1,a.state||(a.state=(null!=(s=t.current.data)?s.state:void 0)||_.head(t.current.name.split("."))),g=a.query||r.path||(null!=(i=t.current.data)?i.query:void 0),g=_.includes(g,"{")?a.$eval(g):{path:g},g.page=a.currentPage,g.pagesize=a.pageSize,a.opts&&_.includes(a.opts,"{")&&(a.opts=a.$eval(a.opts)),a.opts||(a.opts={}),(t.params.tag||a.tags)&&(g.tags=t.params.tag||a.tags),(null!=g?g.path:void 0)&&_.includes(g.path,"/page/")&&(n=g.path.indexOf("/page/"),g.path=g.path.slice(0,n)),e.getData(g).then(function(e){return function(e){var t,n,r;for(n=0,r=e.length;r>n;n++){t=e[n],a.next=t.next,a.opts.shuffle?a.posts=_.shuffle(t.assets):a.posts=t.assets,a.totalPages=t.count/a.pageSize;break}return a.loaded=!0}}(this))},a.prevState=function(){return t.params.tag?t.go(a.state+".filtered.paged",{tag:t.params.tag,page:a.currentPage}):a.state?t.go(a.state+".paged",{page:a.currentPage}):void 0},a.nextState=function(){return t.params.tag?t.go(a.state+".filtered.paged",{tag:t.params.tag,page:a.currentPage}):a.state?t.go(a.state+".paged",{page:a.currentPage}):void 0},a.onPrev=function(){return a.currentPage--,r.prev?a.prevPage():a.state?a.prevState():void 0},a.onNext=function(){return a.currentPage++,r.next?a.nextPage():a.state?a.nextState():void 0},a.$watchGroup(["currentPage","tags"],a.fetchPosts),a.state?a.$on("$stateChangeSuccess",function(e,t,n){return a.state===t.name?a.currentPage=1:void 0}):void 0}}}return e}(),angular.module("imago").directive("imagoPager",["imagoModel","$state",e])}.call(this),angular.module("imago").run(["$templateCache",function(e){e.put("/imago/imago-pager-test.html",'<b>imago-pager-template 2</b><ng-outlet></ng-outlet><div class="imago-pager-content"><button ng-disabled="currentPage &lt;= 1" ng-click="onPrev()" class="prev">Previous</button><button ng-disabled="(currentPage &gt;= totalPages &amp;&amp; !next) || (posts.length &lt; pageSize &amp;&amp; !next) || !next" ng-click="onNext()" class="next">Next</button></div>'),e.put("/imago/imago-pager.html",'<div ng-show="loaded" class="imago-pager-content"><button ng-disabled="currentPage &lt;= 1" ng-click="onPrev()" class="prev">Previous</button><button ng-disabled="(currentPage &gt;= totalPages &amp;&amp; !next) || (posts.length &lt; pageSize &amp;&amp; !next) || !next" ng-click="onNext()" class="next">Next</button></div>')}]);