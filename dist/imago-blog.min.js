(function(){var e,t;e=function(){function e(e){console.log("query",this.query)}return e}(),t=function(){function e(){return{bindings:{query:"@",posts:"=",state:"@",prevPage:"&prev",nextPage:"&next",pageSize:"@",tags:"=?",currentPage:"=?",opts:"@"},controller:"imagoPagerController as imagopager",templateUrl:function(e){return e.templateUrl||"/imago/imago-pager-test.html"},$routeConfig:[{path:"/",name:"imagoPagerBase",useAsDefault:!0},{path:"/page/:page",name:"imagoPagerPage"},{path:"/tags/:tag",name:"imagoPagerFiltered"},{path:"/tags/:tag/page/:page",name:"imagoPagerFilteredPage"}]}}return e}(),angular.module("imago").controller("imagoPagerController",["$location",e]).component("imagoPagerTest",new t)}).call(this),function(){var e;e=function(){function e(e,t,a,n){return{scope:{query:"@",posts:"=",data:"=",state:"@",prevPage:"&prev",nextPage:"&next",pageSize:"@",tags:"=?",currentPage:"=?",opts:"@",loaded:"=?"},restrict:"E",templateUrl:function(e,t){return t.templateUrl||"/imago/imago-pager.html"},link:function(e,r,g){var o;if(e.state||(e.state=(null!=(o=n.current.data)?o.state:void 0)||_.head(n.current.name.split("."))),e.fetchPosts=function(){return a(function(){var a,r,o,s,u;if(e.loaded=!1,e.count+=1,e.posts=[],e.pageSize=(null!=(o=n.current.data)?o.pageSize:void 0)||parseInt(e.pageSize)||10,e.currentPage=n.params.page||parseInt(e.currentPage)||1,e.state||(e.state=(null!=(s=n.current.data)?s.state:void 0)||_.head(n.current.name.split("."))),r=e.query||g.path||(null!=(u=n.current.data)?u.query:void 0),r=_.includes(r,"{")?e.$eval(r):{path:n.current.data.query},e.path&&(r.path=e.path),r.page=e.currentPage||1,r.pagesize=e.pageSize||n.current.data.pageSize,e.opts&&_.includes(e.opts,"{")&&(e.opts=e.$eval(e.opts)),e.opts||(e.opts={}),(n.params.tag||e.tags)&&(r.tags=n.params.tag||e.tags,delete r.recursive),(null!=r?r.path:void 0)&&_.includes(r.path,"/page/")&&(a=r.path.indexOf("/page/"),r.path=r.path.slice(0,a)),!angular.equals(e.lastQuery,r))return e.lastQuery=angular.copy(r),t.getData(r).then(function(t){return function(t){var a,n,r,g,o,s,u;for(g=0,s=t.length;g<s;g++){for(a=t[g],e.next=a.next,e.opts.shuffle?e.posts=_.shuffle(a.assets):e.posts=a.assets,n=angular.copy(a),delete n.assets,e.data=n,e.totalPages=Math.ceil(a.count/e.pageSize),e.pages=[],r=o=1,u=e.totalPages;1<=u?o<u:o>u;r=1<=u?++o:--o)e.pages.push(r);break}return e.loaded=!0}}(this))})},e.changeState=function(){return n.params.tag?n.go(e.state+".filtered.paged",{tag:n.params.tag,page:e.currentPage}):e.state?n.go(e.state+".paged",{page:e.currentPage}):void 0},e.onPrev=function(){return e.currentPage--,g.prev?e.prevPage():e.changeState()},e.onNext=function(){return e.currentPage++,g.next?e.nextPage():e.state?e.changeState():void 0},e.$watchGroup(["currentPage","tags"],e.fetchPosts),e.state)return e.$on("$stateChangeSuccess",function(t,a,n){return e.fetchPosts()})}}}return e}(),angular.module("imago").directive("imagoPager",["imagoUtils","imagoModel","$timeout","$state",e])}.call(this),angular.module("imago").run(["$templateCache",function(e){e.put("/imago/imago-pager-test.html",'<b>imago-pager-template 2</b><ng-outlet></ng-outlet><div class="imago-pager-content"><button ng-disabled="currentPage &lt;= 1" ng-click="onPrev()" class="prev">Previous</button><button ng-disabled="(currentPage &gt;= totalPages &amp;&amp; !next) || (posts.length &lt; pageSize &amp;&amp; !next) || !next" ng-click="onNext()" class="next">Next</button></div>'),e.put("/imago/imago-pager.html",'<div ng-show="loaded" class="imago-pager-content"><button ng-disabled="currentPage &lt;= 1" ng-click="onPrev()" class="prev">Previous</button><button ng-disabled="(currentPage &gt;= totalPages &amp;&amp; !next) || (posts.length &lt; pageSize &amp;&amp; !next) || !next" ng-click="onNext()" class="next">Next</button></div>')}]);