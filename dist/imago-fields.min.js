!function(){var e=function(){return{replace:!0,require:"ngModel",scope:{ngModel:"="},transclude:!0,templateUrl:"/imago/imago-field-checkbox.html",link:function(i,e,n,r){return n.disabled&&(i.disabled=!0),n.$observe("disabled",function(e){return i.disabled=e}),i.update=function(e){if(!i.disabled)return r.$setViewValue(e=!e),r.$render(),n.required?r.$setValidity("required",e):void 0}}}};angular.module("imago").directive("imagoFieldCheckbox",[e])}.call(this),function(){var a=[].indexOf||function(e){for(var i=0,n=this.length;i<n;i++)if(i in this&&this[i]===e)return i;return-1},e=function(){return{require:"ngModel",scope:{currencies:"=",ngModel:"=",save:"&ngChange"},transclude:!0,controller:"imagoFieldCurrencyController as fieldcurrency",bindToController:!0,templateUrl:"/imago/imago-field-currency.html",link:function(t,e,i,n){var r;return null!=(r=t.fieldcurrency.currencies)&&r.length?(t.$watchCollection("fieldcurrency.ngModel",function(){var e,i,n,r,l;if(_.isPlainObject(t.fieldcurrency.ngModel)){for(t.fieldcurrency.notComplete={},l=[],i=0,n=(r=t.fieldcurrency.currencies).length;i<n;i++)e=r[i],angular.isDefined(t.fieldcurrency.ngModel[e])||l.push(t.fieldcurrency.notComplete[e]=!0);return l}}),t.update=function(e){for(var i in e)e[i]=parseFloat(e[i]);return n.$setViewValue(e),n.$render(),t.fieldcurrency.save()}):console.log("no currencies!!")}}},i=function(){var e;null!=(e=this.currencies)&&e.length&&(this.currency=angular.copy(this.currencies[0]))},n=function(t){return{scope:{currency:"=?"},require:"ngModel",link:function(n,e,i,r){var l;return e.on("blur",function(){return r.$render()}),r.$formatters.push(l=function(e){var i;return angular.isDefined(e)&&!_.isNull(e)&&(i=n.currency,e=0<=a.call(t.ZERODECIMAL_CURRENCIES,i)?(e/100).toFixed(0):(e/100).toFixed(2)),e=isNaN(e)?void 0:e}),r.$parsers.push(function(e){if(e)return e=e.replace(/[^\d|\-+|\.+]/g,""),e=Number((100*parseFloat(e)).toFixed(0)),r.$setViewValue(l(e)),e})}}};angular.module("imago").directive("imagoFieldCurrency",[e]).controller("imagoFieldCurrencyController",[i]).directive("imagoFilterCurrency",["imagoUtils",n])}.call(this),function(){var e=function(){return{restrict:"E",require:"ngModel",scope:{min:"=",max:"=",ngModel:"="},transclude:!0,templateUrl:"/imago/imago-field-date.html",link:function(e,i,n,r){return e.update=function(e){return r.$setViewValue(e),r.$render()}}}};angular.module("imago").directive("imagoFieldDate",[e])}.call(this),function(){var e=function(){return{require:"ngModel",scope:{sizeerror:"=?",label:"<?",maxFileSize:"<?",allowedFileTypes:"<?"},transclude:!0,templateUrl:"/imago/imago-field-file.html",link:function(n,e,i,r){return n.maxFileSize||(n.maxFileSize=5),n.sizeerror=!1,n.label||(n.label="Select Files"),e.find("label"),e.find("input").bind("change",function(e){var i;return n.filename=e.target.value.split("\\").pop(),(i=new FileReader).onload=function(i){if(!(i.total>1048576*n.maxFileSize))return n.$apply(function(){var e={filename:n.filename,data:i.target.result,type:"file"};return r.$setViewValue(e),n.sizeerror=!1});n.$apply(function(){return r.$setViewValue(null),n.sizeerror=!0})},i.readAsDataURL(e.target.files[0])})}}};angular.module("imago").directive("imagoFieldFile",[e])}.call(this),function(){var e=function(){return{restrict:"E",require:"ngModel",scope:{min:"=",max:"=",ngModel:"=",readonly:"<"},transclude:!0,templateUrl:"/imago/imago-field-number.html",link:function(i,e,n,r){var l,t;return n.disabled&&(i.disabled=!0),n.$observe("disabled",function(e){return i.disabled=e}),r.$render=function(){return t()},r.$formatters.push(function(e){return parseFloat(e)}),r.$parsers.push(function(e){return parseFloat(e)}),t=function(){var e=!(i.isLimitMin()||i.isLimitMax());if(r.$setValidity("outOfBounds",e),i.isLimitMax()&&i.update(i.max),i.isLimitMin())return i.update(i.min)},l=function(e){e=r.$viewValue+e;return i.update(e)},i.update=function(e){if(!i.disabled)return _.isNaN(e)&&(e=1),e=parseFloat(e),r.$setViewValue(e),r.$render()},i.isLimitMin=function(){if(r.$viewValue<i.min)return!0},i.isLimitMax=function(){if(r.$viewValue>i.max)return!0},i.decrement=function(){return l(-1)},i.increment=function(){return l(1)},t(),i.$watchGroup(["min","max"],function(){return t()})}}};angular.module("imago").directive("imagoFieldNumber",[e])}.call(this),angular.module("imago").run(["$templateCache",function(e){e.put("/imago/imago-field-checkbox.html",'<div class="imago-checkbox"><label ng-class="{active: ngModel, disabled: disabled}" ng-click="update(ngModel)" class="topcoat-checkbox"><div class="topcoat-checkbox__checkmark"></div><span ng-transclude="ng-transclude"></span></label></div>'),e.put("/imago/imago-field-currency.html",'<div class="imago-field-content-currency imago-field currency"><div ng-class="{expanded: fieldcurrency.expanded}"><button ng-click="fieldcurrency.expanded = !fieldcurrency.expanded" class="ii ii-caret-left"></button><div ng-class="{expanded: fieldcurrency.expanded}" class="fields"><div ng-if="!fieldcurrency.expanded" ng-class="{focus:onfocus}" class="wrapper compact"><label><span ng-repeat="cur in fieldcurrency.currencies" ng-click="fieldcurrency.currency = cur" ng-class="{active: fieldcurrency.currency === cur, invalid: fieldcurrency.notComplete[cur]}">{{cur}}</span></label><input type="text" imago-filter-currency="imago-filter-currency" ng-model="fieldcurrency.ngModel[fieldcurrency.currency]" ng-model-options="{updateOn: \'blur\'}" ng-change="update(fieldcurrency.ngModel); onfocus = false" ng-disabled="!fieldcurrency.currency" ng-focus="onfocus = true"/></div><div ng-repeat="cur in fieldcurrency.currencies" ng-if="fieldcurrency.expanded" ng-class="{invalid: fieldcurrency.notComplete[cur]}" class="wrapper expanded"><div class="imago-field"><label>{{cur}}</label><input type="text" currency="{{cur}}" imago-filter-currency="imago-filter-currency" ng-model="fieldcurrency.ngModel[cur]" ng-model-options="{updateOn: \'blur\'}" ng-blur="update(fieldcurrency.ngModel)"/></div></div></div></div></div>'),e.put("/imago/imago-field-date.html",'<div class="imago-field-date-content imago-field date"><div ng-transclude="ng-transclude"></div><input type="text" date-time="date-time" dismiss="true" ng-model="ngModel" ng-blur="update(ngModel)" view="date" min-view="date" partial="true"/></div>'),e.put("/imago/imago-field-file.html",'<input type="file" name="receipt" id="receipt" sizeerror="sizeerror"/><label for="receipt" ng-if="!filename">{{label}} (max {{maxFileSize}}mb)</label><label for="receipt" ng-if="filename">File: {{filename}}</label><div ng-show="sizeerror" class="error">Image File to large</div>'),e.put("/imago/imago-field-number.html",'<div class="imago-field-number-content imago-field"><div ng-transclude="ng-transclude"></div><input type="text" ng-model="ngModel" ng-model-options="{\'updateOn\': \'blur\'}" ng-change="update(ngModel)" ng-disabled="disabled" autocomplete="off" ng-readonly="readonly"/><button type="button" ng-disabled="isOverMin() || disabled" ng-click="decrement()" class="decrement"></button><button type="button" ng-disabled="isOverMax() || disabled" ng-click="increment()" class="increment"></button></div>')}]);