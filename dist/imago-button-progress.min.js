(function(){var o;o=function(){function o(o){return{templateUrl:"/imago/imago-button-progress.html",transclude:!0,scope:{action:"&",progress:"="},link:function(s,n,t){var e,a,r;s.opts={duration:1e3};for(e in t)s.opts[e]&&("true"===(r=t[e])||"false"===r?s.opts[e]=JSON.parse(t[e]):isNaN(t[e])?s.opts[e]=t[e]:s.opts[e]=Number(t[e]));return s.actionType=t.progress?"progress":"action","progress"===s.actionType?s.$watch("progress",function(n){return _.isBoolean(n)?n===!0?s.animateClass=["progress"]:(s.animateClass=["progress","done"],o(function(){return s.animateClass=[]},s.opts.duration)):void 0}):"action"===s.actionType?(s.style={transitonDuration:s.opts.duration},a=null,s.mouseUp=function(){return s.animateClass=[],s.$digest(),o.cancel(a),s.allowAction?(s.action(),s.allowAction=!1):void 0},s.mouseDown=function(){return s.allowAction=!1,s.animateClass=["progress"],s.$digest(),a=o(function(){return s.allowAction=!0,s.mouseUp()},s.opts.duration)},s.mouseLeave=function(){return s.animateClass=[],s.allowAction=!1,o.cancel(a),s.$digest()},n.on("mousedown",s.mouseDown),n.on("mouseup",s.mouseUp),n.on("mouseleave",s.mouseLeave),s.$on("$destroy",function(){return n.off("mousedown",s.mouseDown),n.off("mouseup",s.mouseUp),n.off("mouseleave",s.mouseLeave)})):void 0}}}return o}(),angular.module("imago").directive("imagoButtonProgress",["$timeout",o])}).call(this),angular.module("imago").run(["$templateCache",function(o){o.put("/imago/imago-button-progress.html",'<button class="btn btn-progress"><div ng-style="style" ng-class="animateClass" class="progress-bar type-{{actionType}}"></div><div ng-class="animateClass" class="success-bar"></div><div ng-transclude="ng-transclude" class="imago-button-progress-content"></div></button>')}]);